= Spring Boot Lab

== Overview
This project is a Spring Boot application that demonstrates various features and best practices of the Spring Boot framework, including custom autoconfiguration, conditional bean loading, and actuator endpoints for monitoring and diagnostics.

== Features
* Custom notification services (Email and SMS)
* Conditional bean loading based on configuration properties
* Spring Boot Actuator integration for runtime insights

== Getting Started
To run the application, ensure you have Java and Maven installed. Clone the repository and run via your IDE or use the following command:

[source,shell]
----
./mvnw spring-boot:run
----
== Tasks day 1

=== Autoconfiguration Tasks

. Add the starter dependency for Spring Boot Actuator

. Overwrite autoconfiguration and enable actuator endpoints in `application.yml`: conditions, configprops, beans, env

. Run the app with logs in DEBUG mode to observe the condition report and `/actuator/conditions` endpoint:

=== Notification Service Configuration

. Add the SMS properties to your `NotificationProperties` configuration file

. Uncomment the lines in `SmsNotificationService` to enable SMS sending simulation

. Configure conditional bean loading:
  * The EmailNotificationService is loaded by default and when `notification.type=email`.
  * The SmsNotificationService is loaded only if `notification.type=sms`.

. Check the Rest service defined in the `DemoController`. Execute requests to this service to verify behavior.

. Verify also by changing the `notification.type` property and observing loaded beans in `/actuator/conditions` and `/actuator/beans` endpoints.

=== Bean lifecycle management
Next we want to execute actions inside the bean lifecycle.

. The `CustomAutoConfiguration` should log when it is constructed and destroyed
. Enable the shutdown endpoint
. Verify the correct execution of the lifecycle hooks while starting and stopping the application via the shutdown endpoint `/actuator/shutdown`

== Tasks day 2
You can now checkout the branch `day2` and continue with the following tasks.

=== Secure the rest endpoint
. Configure authentication for the `/notify` endpoint to only allow access with the *manager* role
.. Test if it works by accessing http://localhost:8080/notify[localhost:8080/notify] and logging in with `manager` and `password`
. Configure all actuator endpoints to be accessible only to users with the *admin* role



== Useful Actuator Endpoints
* `/actuator/conditions` - Shows autoconfiguration condition evaluation report
* `/actuator/beans` - Lists all loaded beans
* `/actuator/configprops` - Displays configuration properties
* `/actuator/env` - Shows environment properties



== References
* https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html
* https://projectlombok.org/

